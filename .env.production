# ========================================
# MenuQR - Producción (/opt/menuqr)
# ========================================
# En el servidor: cp .env.production .env
# Luego editar .env y rellenar los valores marcados como PONER_*
# (contraseñas, JWT, SMTP, etc.). No subir .env al repo.
# Traefik + nip.io | certresolver: mytlschallenge
# ========================================

# ========================================
# BASE DE DATOS (servicio Docker: postgres)
# ========================================
POSTGRES_DB=menuqr
POSTGRES_USER=menuqr_user
POSTGRES_PASSWORD=PONER_PASSWORD_POSTGRES

DATABASE_URL=postgresql://menuqr_user:PONER_PASSWORD_POSTGRES@postgres:5432/menuqr

# ========================================
# REDIS (servicio Docker: redis)
# ========================================
REDIS_URL=redis://redis:6379

# ========================================
# JWT - TOKENS (poner valores seguros en .env en el servidor)
# ========================================
JWT_SECRET=PONER_JWT_SECRET_32_CHARS_MINIMO
JWT_REFRESH_SECRET=PONER_JWT_REFRESH_SECRET_32_CHARS
JWT_EXPIRES_IN=15m
JWT_REFRESH_EXPIRES_IN=7d

# ========================================
# MINIO (servicio Docker: minio, solo red interna)
# ========================================
MINIO_ENDPOINT=minio
MINIO_PORT=9000
MINIO_ACCESS_KEY=PONER_MINIO_ACCESS_KEY
MINIO_SECRET_KEY=PONER_MINIO_SECRET_KEY
MINIO_BUCKET=menuqr-assets
MINIO_USE_SSL=false
MINIO_REGION=us-east-1

# ========================================
# EMAIL - SMTP (Brevo) - rellenar en .env en el servidor
# ========================================
SMTP_HOST=smtp-relay.brevo.com
SMTP_PORT=587
SMTP_USER=PONER_USUARIO_SMTP_BREVO
SMTP_PASS=PONER_CLAVE_SMTP_BREVO
SMTP_FROM=PONER_EMAIL_REMITENTE
SMTP_FROM_NAME=MenuQR

# ========================================
# APLICACIÓN - URLs públicas (HTTPS + nip.io)
# ========================================
NODE_ENV=production
PORT=3001

FRONTEND_URL=https://menuqr.72-60-133-229.nip.io
BACKEND_URL=https://api.menuqr.72-60-133-229.nip.io

# Frontend (Next.js) - usadas en build y en runtime
NEXT_PUBLIC_API_URL=https://api.menuqr.72-60-133-229.nip.io
NEXT_PUBLIC_APP_URL=https://menuqr.72-60-133-229.nip.io

# ========================================
# CORS
# ========================================
CORS_ORIGIN=https://menuqr.72-60-133-229.nip.io
CORS_CREDENTIALS=true

# ========================================
# RATE LIMITING
# ========================================
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# ========================================
# LOGGING
# ========================================
LOG_LEVEL=info
LOG_FORMAT=json

# ========================================
# SEGURIDAD
# ========================================
BCRYPT_ROUNDS=12
PASSWORD_MIN_LENGTH=8
PASSWORD_REQUIRE_UPPERCASE=true
PASSWORD_REQUIRE_LOWERCASE=true
PASSWORD_REQUIRE_NUMBERS=true
PASSWORD_REQUIRE_SPECIAL_CHARS=true

# ========================================
# CACHE
# ========================================
CACHE_TTL=3600
MENU_CACHE_TTL=1800

# ========================================
# QR
# ========================================
QR_SIZE=300
QR_MARGIN=2
QR_COLOR=000000
QR_BACKGROUND=FFFFFF

# ========================================
# PLANES Y LÍMITES
# ========================================
FREE_PLAN_RESTAURANT_LIMIT=1
FREE_PLAN_MENU_LIMIT=3
FREE_PLAN_ITEM_LIMIT=50

# ========================================
# PRODUCCIÓN
# ========================================
DEBUG=false
SEED_DATA=false
SKIP_EMAIL_VERIFICATION=false
